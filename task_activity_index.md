# 마이페이지 활동 지수 및 유동적 칭호 시스템 구현 Task

## 1. 개요
현재 마이페이지에 하드코딩되어 있는 '나의 활동 지수' 및 프로필 정보를 DB와 연동하여 실시간으로 반영되도록 개선합니다. 특히 활동 지수(%)에 따라 사용자의 칭호(해시태그)가 자동으로 변경되는 **게이미피케이션(Gamification)** 요소를 도입합니다.

## 2. 주요 구현 사항

### 2-1. 프로필 정보 DB 연동
*   **이름 (사용자명)**: `users` 테이블의 `name` 컬럼과 연동합니다. (기존: "김청년" -> 변경: 실제 유저 이름)
*   **아이디 (이메일)**: `users` 테이블의 `email` 컬럼과 연동합니다.
*   **지역 태그**: `users` 테이블의 `region` 정보를 가져와 해시태그로 표시합니다. (예: `#서울시`)

### 2-2. 활동 지수 (Activity Index) 산출 공식
활동 지수는 사용자가 얼마나 적극적으로 정책을 탐색하고 저장했는지를 보여주는 지표입니다.

*   **공식**: `( 분자 / 분모 ) * 100` (%)
    *   **분자**: 내가 찜한 활동 개수 (`users_action` 테이블에서 `type='like'`인 카운트)
    *   **분모**: 선택한 지역의 전체 정책 개수 (`being_test` 테이블에서 해당 `region`의 정책 카운트)
*   **특이사항**: 사용자가 본인 지역 외의 정책도 찜할 수 있으므로, **100% 초과 달성을 허용**합니다. (성취감 부여)

### 2-3. 유동적 칭호 (Dynamic Title) 시스템
활동 지수 퍼센트에 따라 아래 5단계의 칭호를 프로필 하단 해시태그로 자동 부여합니다.

| 단계 | 범위 | 칭호 (해시태그) | 의미 |
| :-- | :-- | :-- | :-- |
| **1단계** | 0% ~ 10% | **#정책_기웃러 👀** | "뭐 좋은 거 없나?" 하고 슬쩍슬쩍 간만 보는 귀여운 단계. |
| **2단계** | 11% ~ 30% | **#혜택_줍줍러 🍬** | 땅에 떨어진 사탕 줍듯, 눈에 띄는 쉬운 혜택부터 쏙쏙 챙기는 단계. |
| **3단계** | 31% ~ 60% | **#지원금_사냥꾼 🏹** | 이제 뭘 좀 알고 본격적으로 필요한 정책을 찾아다니는 실속파. |
| **4단계** | 61% ~ 99% | **#인간_정책백과 📖** | 친구가 물어보면 "아 그거?" 하고 바로 대답이 나오는 지식인 단계. |
| **5단계** | 100% 이상 | **#정책_오지라퍼 🗣️📢** | 내 지역 정책을 정복하고 다른 지역까지 섭렵한 진정한 고수. |

## 3. 구현 시나리오 (예상 로직)

### Backend (FastAPI)
1.  `GET /api/mypage/profile` 엔드포인트 생성
2.  사용자 이메일로 유저 정보 조회 (`name`, `region`)
3.  해당 유저의 `region`에 해당하는 전체 정책 수 카운트 (분모)
    *   지역이 '전국'이거나 없으면 전체 정책 수 카운트
4.  해당 유저의 `like` 액션 수 카운트 (분자)
5.  퍼센트 계산 및 구간별 칭호(`level_badge`) 결정
6.  JSON 형태로 프론트엔드에 반환

### Frontend (HTML/JS)
1.  마이페이지 로드 시 API 호출
2.  받아온 데이터로 DOM 업데이트
    *   `#user-profile-name`: 이름 변경
    *   `#user-profile-email`: 이메일 변경
    *   `#user-profile-badges`: 지역 태그 + **유동적 칭호 태그** 추가
    *   `#activity-score-text`: "상위 N%" 대신 계산된 퍼센트와 의미 표시
    *   `#activity-progress-bar`: 퍼센트에 맞춰 `width` 스타일 조정 (CSS transition 적용)

## 4. 참고 사항
*   현재 홈페이지에서 "계산 중..."으로 뜨는 문제는 API 연동이 완료되지 않았거나, JS에서 데이터를 받아오는 부분에 오류가 있기 때문일 수 있습니다. 이 Task 명세에 따라 로직을 점검하고 수정해야 합니다.
